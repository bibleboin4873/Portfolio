<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>인터랙티브 QR 코드 생성기</title>
    <!-- Tailwind CSS CDN을 사용하여 심플한 디자인 적용 -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- QR 코드 생성을 위한 qrcode.js 라이브러리 -->
    <script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>
    <style>
        /* 사용자 정의 스타일 */
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap');
        body {
            font-family: 'Noto Sans KR', sans-serif;
        }
        #qrcode-container {
            min-height: 256px; /* QR 코드가 생성될 최소 높이 확보 */
        }
        #qrcode img {
            margin: auto; /* 생성된 QR 코드 이미지를 중앙에 위치시킴 */
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen">

    <div class="bg-white p-8 rounded-2xl shadow-lg max-w-md w-full mx-4">
        
        <!-- 제목 및 설명 -->
        <div class="text-center mb-8">
            <h1 class="text-3xl font-bold text-gray-800">QR 코드 생성기</h1>
            <p class="text-gray-500 mt-2">웹사이트 주소나 원하는 텍스트를 입력하세요.</p>
        </div>

        <!-- 입력 필드 및 버튼 -->
        <div class="space-y-4">
            <input type="text" id="text-input" placeholder="예: https://www.google.com" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition">
            <button id="generate-btn" class="w-full bg-blue-500 text-white font-bold py-3 px-4 rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 transition-transform transform hover:scale-105">
                QR 코드 생성
            </button>
        </div>

        <!-- QR 코드가 표시될 영역 -->
        <div id="qrcode-container" class="mt-8 w-64 h-64 mx-auto border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center transition-all duration-300">
            <div id="qrcode-display"></div>
            <p id="placeholder" class="text-gray-400">QR 코드가 여기에 표시됩니다.</p>
        </div>
        
        <!-- 다운로드 버튼 (초기에는 숨김) -->
        <div class="text-center mt-4">
            <a id="download-btn" class="hidden inline-block bg-green-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-600 transition-colors">
                이미지로 저장
            </a>
        </div>
    </div>

    <script>
        // HTML 요소 가져오기
        const generateBtn = document.getElementById('generate-btn');
        const textInput = document.getElementById('text-input');
        const qrCodeDisplay = document.getElementById('qrcode-display');
        const placeholder = document.getElementById('placeholder');
        const downloadBtn = document.getElementById('download-btn');

        let qrcode = null; // QR 코드 인스턴스를 저장할 변수

        // QR 코드 생성 함수
        function generateQRCode() {
            const text = textInput.value.trim();

            // 입력값이 없으면 함수 종료
            if (!text) {
                alert("QR 코드로 만들 텍스트나 URL을 입력해주세요.");
                textInput.focus();
                return;
            }

            // 이전 QR 코드가 있다면 삭제
            qrCodeDisplay.innerHTML = '';
            
            // 새 QR 코드 생성
            qrcode = new QRCode(qrCodeDisplay, {
                text: text,
                width: 256,
                height: 256,
                colorDark : "#000000",
                colorLight : "#ffffff",
                correctLevel : QRCode.CorrectLevel.H
            });

            // 플레이스홀더 숨기기
            placeholder.classList.add('hidden');
            
            // 다운로드 버튼 설정 (생성된 이미지에 접근하기 위해 약간의 딜레이를 줌)
            setTimeout(() => {
                const qrImg = qrCodeDisplay.querySelector('img');
                if (qrImg) {
                    downloadBtn.href = qrImg.src;
                    downloadBtn.download = 'qrcode.png';
                    downloadBtn.classList.remove('hidden');
                }
            }, 100); 
        }

        // '생성' 버튼 클릭 시 이벤트 리스너
        generateBtn.addEventListener('click', generateQRCode);
        
        // Enter 키를 눌렀을 때도 QR 코드 생성
        textInput.addEventListener('keydown', (event) => {
            if (event.key === 'Enter') {
                generateQRCode();
            }
        });

    </script>
</body>
</html>
